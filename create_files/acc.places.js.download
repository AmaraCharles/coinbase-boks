(()=>{"use strict";const e={bounds:{west:-171.791110603,south:18.91619,east:-66.96466,north:71.3577635769},fields:["formatted_address","place_id"]};function t(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function r(e){for(var r=1;r<arguments.length;r++){var o=null!=arguments[r]?arguments[r]:{};r%2?t(Object(o),!0).forEach((function(t){i(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):t(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function i(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t);if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}'\n    <!DOCTYPE html>\n    <html>\n      <head>\n        <script src="/places.js?'.concat("2023-02-03",'"><\/script>\n      </head>\n      <body></body>\n    </html>\n');const o=["Manhattan","Brooklyn","Queens","The Bronx","Staten Island"],n=new Map([["PR",{country:"US",state:"PR"}],["GU",{country:"US",state:"GU"}],["AS",{country:"US",state:"AS"}],["MP",{country:"US",state:"MP"}],["VI",{country:"US",state:"VI"}]]);function s(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t);if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class a{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.apiKey=e,this.options=t,s(this,"loader",void 0),s(this,"resolve",void 0),s(this,"reject",void 0),s(this,"api",void 0),"undefined"==typeof window)throw new Error("google-maps is supported only in browser environment")}load(){return void 0!==this.api?Promise.resolve(this.api):void 0!==this.loader?this.loader:(window[a.CALLBACK_NAME]=()=>{if(this.api=window.google,void 0===this.resolve)throw new Error("Should not happen");this.resolve(this.api)},window.gm_authFailure=()=>{if(void 0===this.reject)throw new Error("Should not happen");this.reject(new Error("google-maps: authentication error"))},this.loader=new Promise(((e,t)=>{this.resolve=e,this.reject=t;const r=document.createElement("script");r.src=this.createUrl(),r.async=!0,r.onerror=e=>t(e),document.head.appendChild(r)})))}createUrl(){const e=["callback=".concat(a.CALLBACK_NAME)];this.apiKey&&e.push("key=".concat(this.apiKey));for(let t in this.options){let r=this.options[t];"version"===t&&(t="v"),"libraries"===t&&(r=r.join(",")),e.push("".concat(t,"=").concat(r))}return"https://maps.googleapis.com/maps/api/js?".concat(e.join("&"))}}function c(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t);if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}s(a,"CALLBACK_NAME","_dk_google_maps_loader_cb");class l{constructor(){c(this,"loader",void 0),c(this,"google",void 0),c(this,"map",void 0),c(this,"placesService",void 0),c(this,"autocompleteService",void 0),this.loader=new a("AIzaSyCX4cL7TlwXOgzrdw86RNiX7TKD-f2q1h0",{libraries:["places"]})}async initializeGoogle(){await this.loader.load();const e=l.createContainer();this.map=new window.google.maps.Map(e,{center:{lat:37.7749,lng:-122.4194},zoom:10});const{places:t}=window.google.maps;this.autocompleteService=new t.AutocompleteService,this.placesService=new window.google.maps.places.PlacesService(this.map)}autocomplete(t){let{bounds:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;return new Promise(((e,i)=>{var o;null===(o=this.autocompleteService)||void 0===o||o.getPlacePredictions({input:t,bounds:r},((t,r)=>{if(r===window.google.maps.places.PlacesServiceStatus.OK){const r=t.map((e=>{let{place_id:t,structured_formatting:{main_text:r,secondary_text:i}}=e;return{place_id:t,structured_formatting:{main_text:r,secondary_text:i}}}));return e(r)}i(r)}))}))}details(e){return new Promise(((t,r)=>{var i;null===(i=this.placesService)||void 0===i||i.getDetails({placeId:e,fields:["address_components","name"]},((e,i)=>{if(i===window.google.maps.places.PlacesServiceStatus.OK){let r={};e&&(r=l.normalizePlace(e)),t(r)}return r(i)}))}))}static createContainer(){const e=document.createElement("div");return Math.random()>.9&&(e.style.position="absolute",e.style.height="1px",e.style.width="1px",e.style.left="-100px",window.document.body.appendChild(e)),e}static normalizePlace(e){let t,i={};if(!e)return i;e.name&&(i.address1=e.name);let s=!1;return e.address_components.forEach((e=>{let{long_name:r,short_name:n,types:a}=e;if(a.includes("street_number"))i.street_number=r;else if(a.includes("route"))i.street_name=r;else if(a.includes("locality"))i.city=r;else if(a.includes("sublocality_level_1"))t={long_name:r,short_name:n,types:a};else if(a.includes("administrative_area_level_1")){var c,l;i.state=n,i.province=n,!((e,t)=>"New York"===e||"NY"===t)(r,n)||"New York"!==i.city&&null!==(c=i)&&void 0!==c&&c.city||!(e=>o.includes(e))(null===(l=t)||void 0===l?void 0:l.long_name)||(i.city=t.long_name)}else a.includes("postal_code")?i.zip=r:a.includes("country")?(i.country_code=n,s=!((e,t)=>["United States","Canada","Puerto Rico","Guam","American Samoa","Northern Mariana Islands","U.S. Virgin Islands"].includes(e)||["US","CA","PR","GU","AS","MP","VI"].includes(t))(r,n)):a.includes("postal_town")&&(i.city=r)})),i=(e=>{if(e.country_code&&n.has(e.country_code)){const{country:t,state:i}=n.get(e.country_code);return r(r({},e),{},{country_code:t,state:i})}return r({},e)})(i),s&&(i.state=void 0,i.province=void 0),i}}let u=null;const d=e=>{if(!e||0===e.trim().length)return!1;try{return new URL(e),!0}catch(e){return!1}};const p=["accounts.coinbase.com","accounts-dev.cbhq.net","accounts-staging.cbhq.net","localhost"];class m{constructor(){var e,t,r;e=this,r=void 0,(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t);if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t="client"))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,(async()=>{null===u&&(u=new l,await u.initializeGoogle())})(),this.client=(()=>{if(null===u)throw new Error("Tried to use placesClient singleton before initialization");return u})(),this.initializeAutocompleteListener(),this.initializeDetailsListener()}static isAllowedHost(e){try{const t=new URL(e);let{host:r}=t;const{port:i}=t;return i&&(r=r.split(":")[0]),p.includes(r)}catch(e){return console.error(e),!1}}async fetchAddressAutocomplete(e){try{return await this.client.autocomplete(e)}catch(e){return console.error(e),[]}}async fetchPlaceDetails(e){try{return await this.client.details(e)}catch(e){return console.error(e),{}}}initializeAutocompleteListener(){window.addEventListener("message",(async e=>{const{message:t,body:r,id:i}=e.data;if(d(e.origin)&&!m.isAllowedHost(e.origin)||"PLACES_AUTOCOMPLETE_REQUEST"!==t)return;const o=await this.fetchAddressAutocomplete(r);e.source.postMessage({body:o,message:"PLACES_AUTOCOMPLETE_RESPONSE",id:i},e.origin)}))}initializeDetailsListener(){window.addEventListener("message",(async e=>{const{message:t,body:r,id:i}=e.data;if(d(e.origin)&&!m.isAllowedHost(e.origin)||"PLACES_DETAILS_REQUEST"!==t)return;const o=await this.fetchPlaceDetails(r);e.source.postMessage({body:o,message:"PLACES_DETAILS_RESPONSE",id:i},e.origin)}))}}new m})();